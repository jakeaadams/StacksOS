# StacksOS Master PRD (v1)

Date: 2026-01-24
Owner: StacksOS
Scope: ILS + LSP-grade platform + AI-first UX

## 0) Evidence tiers
- D (Doc-verified): manuals, help centers, implementation guides.
- M (Marketing-verified): product pages, announcements.
- S (Standards-verified): W3C, NISO, LoC, etc.
- I (Inference): not explicitly documented.

## 1) Product definition
StacksOS = System of Record + System of Engagement.
- System of record: circulation, patrons, items, fines, acquisitions, serials, inventory, policies.
- System of engagement: discovery UX, notifications, analytics, staff productivity, AI assistance.

## 2) Competitive coverage (doc vs marketing)
- Alma (D/M): circulation/fulfillment + offline + SIP2 (docs) and acquisitions/PO lines + license/ERM (docs), analytics (marketing). Sources: [Circulation FAQ](https://knowledge.exlibrisgroup.com/Alma/Product_Materials/050Alma_FAQs/Fulfillment/Circulation), [Intro to Acquisitions](https://knowledge.exlibrisgroup.com/Alma/Product_Documentation/010Alma_Online_Help_%28English%29/020Acquisitions/010Introduction_to_Acquisitions), [Manual PO line creation](https://knowledge.exlibrisgroup.com/Alma/Product_Documentation/010Alma_Online_Help_%28English%29/020Acquisitions/050Purchasing/040Creating_PO_Lines_-_New_Layout/020Manually_Creating_a_PO_Line_-_New_Layout), [Licenses](https://knowledge.exlibrisgroup.com/Alma/Product_Materials/050Alma_FAQs/E-Resource_Management/Licenses), [Alma Analytics](https://exlibrisgroup.com/products/alma-library-services-platform/alma-analytics/).
- Sierra (D): training resources by functional area (circulation, cataloging, acquisitions, serials, admin, reporting). Source: [Sierra training hub](https://innovative.libguides.com/sierra).
- Symphony (D/M): module list (marketing) and WorkFlows policy/config docs (documentation). Sources: [Symphony modules](https://www.sirsidynix.com/symphony/), [WorkFlows policies](https://symphony.npm.edu.tw/Helps/Symphony/Workflows/English/Content/Topics/09-ConfigPolicies/Config_and_Policy_Overvi.htm).
- Polaris (D): LEAP workforms for patrons/items/holds/cataloging/acquisitions; offline circulation admin documentation. Sources: [LEAP workforms](https://documentation.iii.com/leap/7.7/LEAP1_0/Basics/Workforms/Leap_workforms.htm), [Offline circulation admin](https://documentation.iii.com/polaris/7.4/PolarisStaffHelp/HelpTopics/Using_Polaris_Offline_Circulation_Administration.htm).
- Koha (D): circulation, acquisitions, serials, and patron/barcode auto-numbering preferences. Sources: [Circulation](https://koha-community.org/manual/20.05/en/html/circulation.html), [Acquisitions](https://koha-community.org/manual/23.05/en/html/acquisitions.html), [Serials](https://koha-community.org/manual/latest/en/html/serials.html), [autoMemberNum](https://koha-community.org/manual/latest/en/html/patronspreferences.html).
- Evergreen (D): circulation, acquisitions (line items/PO/invoices), serials workflows, barcode completion. Sources: [Circulation](https://docs.evergreen-ils.org/docs/latest/circulation/circulating_items_web_client.html), [Acquisitions line items/PO](https://docs.evergreen-ils.org/docs/latest/acquisitions/selection_lists_po.html), [Invoices](https://docs.evergreen-ils.org/docs/latest/acquisitions/invoices.html), [Serials module](https://docs.evergreen-ils.org/docs/latest/serials/C-serials_workflow.html), [Barcode completion](https://docs.evergreen-ils.org/docs/latest/admin/lsa-barcode_completion.html).
- Surpass Cloud (D): cataloging (copy cataloging + Z39.50), OPAC configuration, barcode formats. Sources: [Cataloging sources](https://docs.surpass.cloud/docs/setting-resource-catalogingsource), [Resource records](https://docs.surpass.cloud/docs/where-to-get-resource-records), [OPAC settings](https://docs.surpass.cloud/docs/setting-opac-general), [Barcodes](https://docs.surpass.cloud/docs/barcodes).
- Follett Destiny (D): patron import identifier handling + barcode list generation. Sources: [Import patrons](https://destinyhelp165en.fsc.follett.com/content/t_import_patrons.htm), [Barcode list](https://destinyhelp170en.fsc.follett.com/Content/t_generate_barcode_list.htm).
- FOLIO (D): feature coverage across circulation/acquisitions/cataloging/ERM; Inventory app; EDIFACT for acquisitions. Sources: [FOLIO features](https://docs.folio.org/docs/about-folio/features/), [Inventory](https://docs.folio.org/docs/metadata/inventory/), [EDIFACT](https://docs.folio.org/docs/acquisitions/additional-topics/edifact/).
- Alexandria (D): patron/item import with barcode handling; barcode guidelines. Sources: [Import patrons](https://support.goalexandria.com/operations/import/import-patrons/), [Import items](https://support.goalexandria.com/operations/import/import-items/), [Barcode guidelines](https://support.goalexandria.com/getting-started/barcode-your-collection/).

## 3) Parity matrix (doc/marketing coverage)
Legend: D = doc-verified, M = marketing-verified, S = standards-verified, I = inference, - = not documented publicly

Module | Alma | Sierra | Symphony | Polaris | Koha | Evergreen | Surpass | Follett | FOLIO | Alexandria
---|---|---|---|---|---|---|---|---|---|---
Circulation | D | D | D | D | D | D | I | I | D | I
Cataloging/MARC | D | D | D | D | I | I | D | I | D | I
Authority control | D | I | D | I | I | I | I | - | I | -
Acquisitions | D | D | D | I | D | D | I | - | D | -
Serials | I | D | D | I | D | D | I | - | I | -
ERM/E-resources | D | I | M | - | - | - | - | - | D | -
Discovery/OPAC | I | I | I | I | I | I | D | I | I | I
Reporting/Analytics | M | D | M | I | I | I | I | I | I | -
Admin/Config | I | D | D | D | I | I | I | I | I | I
Offline circulation | D | I | M | D | I | I | I | I | I | -

## 4) UX behavior spec (non-negotiable)
- Scan-first: barcode input is always focused unless user explicitly moves away.
- Keyboard-first: hotkeys for all frequent actions + command palette.
- Data-dense layouts by default; progressive disclosure for details.
- No context loss: edit in drawers/panels instead of page navigation.
- Optimistic UI for scan flows; reconcile in background.
- Error explainability: show policy conflicts + actionable fixes.
- Offline mode: clear indicator, queue, reconciliation UI.
- Accessibility: WCAG 2.2 AA baseline, keyboard-only workflows pass.

## 5) Must-win throughput targets (definition of done)
- Checkout: scan -> success UI < 400ms; server response < 150ms; 50 items/min sustained.
- Check-in: scan -> routing decision < 250ms; hold/in-transit slip queued < 1s.
- Patron switch: scan -> new context < 200ms.
- Holds pull list: generate/filter 50k holds < 2s; export < 5s.
- Catalog record: open/edit/validate/save < 2s with diff/rollback.
- Z39.50 search: query -> 100 results < 2s; import < 2s.
- Item status/history: render < 1s with virtualization.
- Receiving: PO load < 2s; receive update < 500ms.
- Serials: pattern gen < 1s; check-in < 500ms.
- Reports: dashboard < 2s; CSV 100k rows < 10s (async).

## 6) P0/P1/P2 backlog (with acceptance criteria)

### P0 (pilot-ready)
- Staff Shell + Design System completion
  - AC: All staff pages use shared components and consistent layout.
- Auth + RBAC + workstation auto-register
  - AC: role enforcement at API, workstation auto-register per device+branch.
- Circulation hardening
  - AC: checkout/check-in/holds/claims/lost/bills/renew end-to-end.
- Patron management
  - AC: create/edit/blocks + audit log for changes.
- Cataloging MVP
  - AC: MARC edit + Z39.50 import + authority search.
- Acquisitions MVP
  - AC: PO -> receive -> invoice link; fund totals update.
- Serials MVP
  - AC: subscription + check-in + claim flow.
- Reporting MVP
  - AC: role dashboards + CSV export.
- Migration + Barcode engine
  - AC: canonical barcode retention + alias normalization + preflight.
- Audit logging + observability
  - AC: all actions logged with actor + endpoint.
- Accessibility baseline
  - AC: keyboard-only workflows pass WCAG 2.2 AA checks.

### P1 (competitive parity)
- OPAC/Discovery v1
  - AC: unified search + facets + patron account + holds placement.
- Advanced acquisitions (EDI, claims, splits)
- Advanced serials (routing slips, auto claims)
- ERM v1 (licenses + packages + usage stats import)
- Notifications center (email/SMS templates + prefs)
- Admin policy center (calendars + circulation rules)
- Offline reconciliation UI

### P2 (world-class differentiators)
- AI cataloging assist (subjects + summaries with provenance)
- AI circulation assist (risk alerts + policy reasoning)
- AI discovery (semantic search + recs with privacy opt-in)
- AI analytics (auto insights + drilldowns)
- SaaS control plane (tenant provisioning + upgrades + backups)

## 7) Standards and protocols (baseline)
- Accessibility: WCAG 2.2 AA target. Source: [W3C WCAG 2.2 Recommendation](https://www.w3.org/news/2023/web-content-accessibility-guidelines-wcag-2-2-is-a-w3c-recommendation/).
- NCIP: adopt NISO NCIP (ANSI/NISO Z39.83) for resource sharing/system-to-system circulation. Source: [NISO NCIP](https://www.niso.org/standards-committees/ncip).
- BIBFRAME: maintain a BIBFRAME mapping/roadmap for linked-data interoperability. Source: [Library of Congress BIBFRAME](https://www.loc.gov/bibframe/).
- SIP2: support self-check/RFID integrations (SIP2 referenced by Alma self-check integration). Source: [Alma Circulation FAQ](https://knowledge.exlibrisgroup.com/Alma/Product_Materials/050Alma_FAQs/Fulfillment/Circulation).

## 8) Migration + barcode system spec (evidence-driven)
- Canonical barcode retention by default; support aliasing and normalization.
- Barcode profile engine per tenant/library: length, prefix, suffix, padding, checkdigit, symbology.
- Preprocessing rules: strip alpha, strip leading zeros, whitespace normalization (align with Alexandria import options and Evergreen barcode completion).
- Alias table for legacy/alternate IDs (align with Surpass and Destiny identifier handling).
- Preflight validator: duplicates, invalid length, invalid checkdigit, illegal chars.
- Import modes: add-only, add/update, reassign + duplicate handling.
- Dry-run + reconciliation reports before cutover; delta import after pilot.
- Vendor mapping templates for Polaris/Sierra/Symphony/Koha/Evergreen/Destiny/Surpass/Alexandria/FOLIO/Alma.
Evidence: [Evergreen barcode completion](https://docs.evergreen-ils.org/docs/latest/admin/lsa-barcode_completion.html), [Koha autoMemberNum](https://koha-community.org/manual/latest/en/html/patronspreferences.html), [Surpass barcode formats](https://docs.surpass.cloud/docs/barcodes), [Alexandria import patrons](https://support.goalexandria.com/operations/import/import-patrons/), [Alexandria import items](https://support.goalexandria.com/operations/import/import-items/), [Destiny patron import](https://destinyhelp165en.fsc.follett.com/content/t_import_patrons.htm), [Destiny barcode list](https://destinyhelp170en.fsc.follett.com/Content/t_generate_barcode_list.htm).

## 9) Security, privacy, compliance
- Encryption at rest and in transit.
- MFA for admin roles (P1).
- Fine-grained permissions + field-level restrictions (P1).
- Full audit trails for sensitive changes.
- Privacy-safe analytics defaults.

## 10) Observability and reliability
- Structured logs + correlation IDs.
- Metrics/alerts per tenant.
- SLOs for checkout/search/circ.
- Queue-based async jobs.

## 11) Training + support
- Role-based onboarding walkthroughs.
- Migration playbooks.
- Knowledge base + in-app help.
- Release notes + upgrade impact notes.

## Sources (selected)
- Evergreen permissions list: https://docs.evergreen-ils.org/3.15/administration/permission_list.html
- Evergreen staff user/group permissions (working location): https://docs.evergreen-ils.org/3.15/admin_initial_setup/staff_user_permission_groups.html
- Alma circulation/fulfillment FAQ: https://knowledge.exlibrisgroup.com/Alma/Product_Materials/050Alma_FAQs/Fulfillment/Circulation
- Alma acquisitions overview: https://knowledge.exlibrisgroup.com/Alma/Product_Documentation/010Alma_Online_Help_%28English%29/020Acquisitions/010Introduction_to_Acquisitions
- Alma license management FAQ: https://knowledge.exlibrisgroup.com/Alma/Product_Materials/050Alma_FAQs/E-Resource_Management/Licenses
- Sierra training hub: https://innovative.libguides.com/sierra
- Symphony modules: https://www.sirsidynix.com/symphony/
- Polaris LEAP workforms: https://documentation.iii.com/leap/7.7/LEAP1_0/Basics/Workforms/Leap_workforms.htm
- Polaris offline circulation admin: https://documentation.iii.com/polaris/7.4/PolarisStaffHelp/HelpTopics/Using_Polaris_Offline_Circulation_Administration.htm
- Koha manual: https://koha-community.org/manual/
- Koha circulation: https://koha-community.org/manual/20.05/en/html/circulation.html
- Koha serials: https://koha-community.org/manual/latest/en/html/serials.html
- Evergreen docs: https://docs.evergreen-ils.org/
- Surpass Cloud docs: https://docs.surpass.cloud/
- Follett Destiny help: https://destinyhelp165en.fsc.follett.com/
- FOLIO features: https://docs.folio.org/docs/about-folio/features/
- FOLIO Inventory: https://docs.folio.org/docs/metadata/inventory/
- FOLIO EDIFACT: https://docs.folio.org/docs/acquisitions/additional-topics/edifact/
- Alexandria support: https://support.goalexandria.com/
- WCAG 2.2: https://www.w3.org/news/2023/web-content-accessibility-guidelines-wcag-2-2-is-a-w3c-recommendation/
- NCIP: https://www.niso.org/standards-committees/ncip
- BIBFRAME: https://www.loc.gov/bibframe/
