{
  # StacksOS reverse proxy (Caddy)
  # - Terminates TLS (uses an internal CA by default)
  # - Enables gzip/zstd
  #
  # Set STACKSOS_HOST to a hostname or LAN IP (example: 192.168.1.233).
}

{$STACKSOS_HOST:stacksos.lan} {
  tls internal

  encode zstd gzip

  # Cache immutable Next.js static chunks aggressively.
  @static path /_next/static/*
  header @static Cache-Control "public, max-age=31536000, immutable"

  reverse_proxy 127.0.0.1:3000
}

